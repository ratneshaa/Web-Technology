<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Survey Builder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            padding: 20px;
        }

        form {
           
            padding: 20px;
            max-width: 600px;
            margin: auto;
            border-radius: 6px;
        }

        .question {
            margin-bottom: 20px;
        }

        .error {
            color: red;
            font-size: 0.9em;
            margin-top: 5px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h2>Dynamic Survey</h2>

<form id="surveyForm"></form>

<script>
    // 1. Survey structure
    const questions = [
        {
            id: "name",
            label: "What is your name?",
            type: "text",
            required: true,
            maxLength: 20
        },
        {
            id: "gender",
            label: "Gender",
            type: "radio",
            required: true,
            options: ["Male", "Female", "Other"]
        },
        {
            id: "hobbies",
            label: "Select your hobbies (max 2)",
            type: "checkbox",
            required: true,
            maxSelect: 2,
            options: ["Sports", "Music", "Reading", "Travel"]
        }
    ];

    const form = document.getElementById("surveyForm");

    // 2. Dynamically generate form fields
    questions.forEach(q => {
        const div = document.createElement("div");
        div.className = "question";

        const label = document.createElement("label");
        label.innerText = q.label;
        div.appendChild(label);

        if (q.type === "text") {
            const input = document.createElement("input");
            input.type = "text";
            input.id = q.id;
            div.appendChild(document.createElement("br"));
            div.appendChild(input);
        }

        if (q.type === "radio" || q.type === "checkbox") {
            q.options.forEach(option => {
                const input = document.createElement("input");
                input.type = q.type;
                input.name = q.id;
                input.value = option;

                const text = tell = document.createTextNode(option);

                div.appendChild(document.createElement("br"));
                div.appendChild(input);
                div.appendChild(text);
            });
        }

        const error = document.createElement("div");
        error.className = "error";
        error.id = q.id + "-error";
        div.appendChild(error);

        form.appendChild(div);
    });

    const submitBtn = document.createElement("button");
    submitBtn.type = "submit";
    submitBtn.innerText = "Submit Survey";
    form.appendChild(submitBtn);

    // 3â€“6. Validation logic
    form.addEventListener("submit", function (e) {
        e.preventDefault(); 
        let isValid = true;

        questions.forEach(q => {
            const errorDiv = document.getElementById(q.id + "-error");
            errorDiv.innerText = "";

            if (q.type === "text") {
                const input = document.getElementById(q.id).value.trim();

                if (q.required && input === "") {
                    errorDiv.innerText = "This field is required.";
                    isValid = false;
                } else if (q.maxLength && input.length > q.maxLength) {
                    errorDiv.innerText = `Maximum ${q.maxLength} characters allowed.`;
                    isValid = false;
                }
            }

            // RADIO validation
            if (q.type === "radio") {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`);

                if (q.required && !selected) {
                    errorDiv.innerText = "Please select an option.";
                    isValid = false;
                }
            }

            // CHECKBOX validation
            if (q.type === "checkbox") {
                const selected = document.querySelectorAll(`input[name="${q.id}"]:checked`);

                if (q.required && selected.length === 0) {
                    errorDiv.innerText = "Please select at least one option.";
                    isValid = false;
                } else if (q.maxSelect && selected.length > q.maxSelect) {
                    errorDiv.innerText = `You can select up to ${q.maxSelect} options.`;
                    isValid = false;
                }
            }
        });

        if (isValid) {
            alert("Survey submitted successfully!");
            form.reset();
        }
    });
</script>

</body>
</html>
